<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

    <h1>Bob</h1>

    <button id = "button-start">start connect</button>

    <textarea id = "input-answer"></textarea>
    <button id = "button-accept">Accept answer</button>


    <script type="text/javascript">

        /*BOB INIT*/
        const bob = new RTCPeerConnection();
        const channel = bob.createDataChannel('bob-channel');

		channel.onopen = e => console.log('Channel was opened')

        //bob.onicecandidate = e => console.log('Bob', JSON.stringify(bob.localDescription))

        /********/
        const buttonStart  = document.getElementById('button-start');
		const buttonAccept = document.getElementById('button-accept');
		const inputAnswer  = document.getElementById('input-answer')
        /********/

        buttonStart.addEventListener('click', () => {

			bob.createOffer()
            .then(offer => bob.setLocalDescription(offer))
            .then(() => console.log(JSON.stringify(bob.localDescription)))

        })

        buttonAccept.addEventListener('click', () => {

			const answer = new RTCSessionDescription(JSON.parse(inputAnswer.value));

			bob.setRemoteDescription(answer)
			.then(() => console.log('Remote description set'))
        })




    </script>
</body>
</html>
